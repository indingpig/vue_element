<!-- s:项目变更 -->
<div ng-if="component.lookupType == 'projChange'">
    <div class="input-group">
        <input
        type="text"
        class="form-control"
        name="{{ componentId }}_desc"
        id="{{ componentId }}_desc"
        readonly="readonly"
        ng-required="isRequired(component)"
        custom-validator="component.validate.custom"
        ng-model="data[component.key+'_data']['projectName']"
        tabindex="{{ component.tabindex || 0 }}"
        ng-attr-placeholder="{{ component.placeholder | formioTranslate:null:builder }}"/>
        <input type="hidden" ng-model="data[component.key]" name="{{componentId}}" id="{{componentId}}" ng-required="isRequired(component)">
        <input type="hidden" ng-model="data[component.key+'Data']" name="{{componentId}}_data" id="{{componentId}}_data">
        <span class="input-group-btn">
        <button type="button" ng-readonly="true" class="btn btn-default" ng-click="$emit('buttonClick', component, componentId)" ng-disabled="isDisabled(component)">
            <i class="fa fa-search"></i>
        </button>
        </span>
    </div>
    <div>
        <div class="input-group department">
            <div class="department-top department-line">
                <div class="department-msg" ng-bind="'com.hytera.proj.changeContent' | mess"></div>
                <div class="department-msg" ng-bind="'com.hytera.proj.beforeChange' | mess"></div>
                <div class="department-msg" ng-bind="'com.hytera.proj.changeTo' | mess"></div>
            </div>
            <div class="input-group" ng-repeat="(item, val) in data[component.key + '_deptList']">
                <div class="department-line">
                    <!-- s:变更内容 -->
                    <div class="department-msg" ng-bind="'com.hytera.proj.' + item | mess"></div>
                    <!-- e:变更内容 -->
                    <!-- s:变更前 -->
                    <div class="department-msg">
                        <!-- 项目预算 -->
                        <div class="input-group">
                            <input type="text" ng-value="val" class="form-control" ng-if="item == 'projectBudget'" disabled><div ng-if="item == 'projectBudget'" class="input-group-addon ng-binding ng-scope">元</div>
                        </div>
                        <!-- 项目名称 -->
                        <input type="text" ng-value="val" class="form-control" ng-if="item == 'projectName'" disabled>
                        <!-- 项目负责人 -->
                        <div class="input-group"  ng-if="item == 'projectLeader'">
                            <input type="text" class="form-control" ng-value="val" ng-readonly="true"/>
                            <span class="input-group-btn">
                                <button type="button" ng-readonly="true" class="btn btn-default" disabled>
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                        <!-- 项目状态 -->
                        <select ng-if="item == 'projectStatus'" class="form-control" ng-model="temp['projectStatus']" ng-options="obj.itemKey as obj.itemValue for obj in projectStatus" disabled></select>
                        <!-- <input type="text" ng-value="val" class="form-control" ng-if="item == 'projectStatus'" disabled> -->
                        <!-- 项目结束时间 -->
                        <div class="input-group" ng-if="item == 'endTime'">
                            <input type="text" class="form-control" ng-value="val" uib-datepicker-popup ng-model="startDate" is-open="popup.startDatePopup" datepicker-options="dateOptions" close-text="Close" ng-readonly="true"/>
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" disabled>
                                    <i class="fa-calendar"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <!-- e:变更前 -->
                    <!-- s:变更为 -->
                    <div class="department-msg errorInfo">
                        <!-- <input ng-required="isRequired(component)" type="text" name="{{componentId + item}}" id="{{componentId + item}}" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" class="form-control" ng-if="item !='projectBudget' && item != 'projectName' && item != 'projectLeader' && item != 'projectStatus' && item != 'endTime'" ng-disabled="isDisabled(component)"> -->
                        <!-- 项目预算 -->
                        <div class="input-group">
                            <input required type="text" name="{{componentId + item}}" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" ng-if="item == 'projectBudget'" ng-blur="toThousand()" ng-disabled="isDisabled(component)"><span ng-if="item == 'projectBudget'" class="input-group-addon ng-binding ng-scope">元</span>
                        </div>
                        <!-- 项目名称 -->
                        <input required type="text" name="{{componentId + item}}" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" ng-if="item == 'projectName'" ng-disabled="isDisabled(component)">
                        <!-- 项目负责人 -->
                        <div class="input-group" ng-if="item == 'projectLeader'">
                            <!-- {{data[component.key + 'ChangeInfo'][item]['Update']}} -->
                            <input required type="text" name="{{componentId + item}}" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']['realName']" ng-readonly="true"/>
                            <span class="input-group-btn">
                                <button type="button" ng-readonly="true" class="btn btn-default" ng-click="selectProjectLeader()" ng-disabled="isDisabled(component)">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                        <!-- 项目状态 -->
                        <select required name="{{componentId + item}}" ng-if="item == 'projectStatus'" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" ng-options="obj.itemKey as obj.itemValue for obj in projectStatus" ng-disabled="isDisabled(component)"></select>
                        <!-- 项目结束时间 -->
                        <div class="input-group" ng-if="item == 'endTime'">
                            <input required type="text" name="{{componentId + item}}" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" uib-datepicker-popup is-open="popup.endTimePopup" datepicker-options="dateOptions" close-text="Close" ng-readonly="true"/>
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="endTimeOpen()" ng-disabled="isDisabled(component)">
                                    <i class="fa-calendar"></i>
                                </button>
                            </span>
                        </div>
                        <!-- 错误提示 -->
                        <div ng-show="formioForm.{{componentId + item}}.$error && !formioForm.{{componentId + item}}.$pristine" class="error-show" style="padding-left: 0">
                            <p ng-show="formioForm.{{componentId + item}}.$error.required" style="color:#a94442;text-align:left;" ng-bind="'com.hytera.org.completeInfo'|mess">请补全信息</p>
                        </div>
                    </div>
                    <!-- e:变更为 -->
                    <div class="department-msg btn-del">
                        <button class="btn btn-red btn-xs" type="button" ng-click="del(item)" style="margin-top:5px;margin-bottom:0px !important;float:left;margin-left:0px;" ng-disabled="isDisabled(component)"><i class="fa fa-times"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- modal -->
    <div class="">
        <script type="text/ng-template" id="chooseProjectDialog.html">
            <div ng-include="'admin/admin/modals/modal.chooseProject.html'"></div>
        </script>
    </div>
    <!-- /modal -->
    <!-- modal:选择部门负责人模态框 -->
    <div>
        <script type="text/ng-template" id="lookupDialog.html">
            <div ng-include="'admin/admin/modals/modal.lookup.html'"></div>
        </script>
    </div>
</div>
<!-- e:项目变更 -->

<!-- s:项目状态批量变更 -->
<div ng-if="component.lookupType == 'projStatusChange'">
    <div>
        <div>
            <button type="button" class="btn btn-default" ng-click="$emit('buttonClick', component, componentId)" ng-disabled="isDisabled(component)">
                <i class="fa fa-search"></i>
            </button>
            项目搜索
        </div>
        <div class="input-group department">
            <div class="department-top department-line">
                <div class="department-msg" ng-bind="'com.hytera.proj.projNameToBeChange' | mess"></div>
                <div class="department-msg" ng-bind="'com.hytera.proj.changeContent' | mess"></div>
                <div class="department-msg" ng-bind="'com.hytera.proj.beforeChange' | mess"></div>
                <div class="department-msg" ng-bind="'com.hytera.proj.changeTo' | mess"></div>
            </div>
            <div class="input-group">
                <div class="department-line" ng-repeat="(item, val) in data[component.key + '_data']">
                    <!-- 需要变更的项目 -->
                    <div class="input-group department-msg">
                        <input type="text" class="form-control" readonly="readonly" ng-model="data[component.key+'_data'][item]['projectName']"/>
                        <input type="hidden" ng-model="data[component.key]" name="{{componentId}}" id="{{componentId}}">
                        <input type="hidden" ng-model="data[component.key+'Data']" name="{{componentId}}_data" id="{{componentId}}_data">
                    </div>
                    
                    <!-- 变更内容 -->
                    <div class="department-msg" ng-bind="'com.hytera.proj.projectStatus' | mess"></div>
                    
                    <!-- 变更前 -->
                    <div class="department-msg">
                        <!-- 项目状态 -->
                        <select class="form-control" ng-model="data[component.key+'_data'][item]['projectStatus']" ng-options="obj.itemKey as obj.itemValue for obj in projectStatus" disabled></select>
                    </div>
                    
                    <!-- 变更为 -->
                    <div class="department-msg errorInfo">
                        <!-- 项目状态 -->
                        <select required name="{{componentId + item}}" class="form-control" ng-model="data[component.key + 'ChangeInfo'][item]['Update']" ng-options="obj.itemKey as obj.itemValue for obj in projectStatus" ng-disabled="isDisabled(component)"></select>
                    </div>

                    <div class="department-msg btn-del">
                        <button class="btn btn-red btn-xs" type="button" ng-click="statusDel(item)" style="margin-top:5px;margin-bottom:0px !important;float:left;margin-left:0px;" ng-disabled="isDisabled(component)"><i class="fa fa-times"></i></button>
                    </div>
                    <!-- 错误提示 -->
                    <div ng-show="formioForm.{{componentId + item}}.$error && !formioForm.{{componentId + item}}.$pristine" class="error-show" style="padding-left: 0">
                        <p ng-show="formioForm.{{componentId + item}}.$error.required" style="color:#a94442;text-align:right;padding-right:25%" ng-bind="'com.hytera.org.completeInfo'|mess">请补全信息</p>
                    </div>
                </div>
            </div>
        </div>
        <style>
            #form-group-chooseProject label.control-label{
                display: none;
            }
            #form-group-chooseProject > div > div.input-group {
                width: 100% !important;
            }
            .input-group .department-msg {
                width: 22%;
            }
        </style>
    </div>
    <!-- modal -->
    <div class="">
        <script type="text/ng-template" id="chooseProjectDialog.html">
            <div ng-include="'admin/admin/modals/modal.chooseProject.html'"></div>
        </script>
    </div>
    <!-- /modal -->      
</div>
<!-- e:项目状态批量变更 -->
<style>
    .has-error .department-top.department-line {
        border-color: #a94442;
        color: #a94442;
    }
    .has-error .errorInfo input{ 
        border-color: #a94442;
    }
</style>